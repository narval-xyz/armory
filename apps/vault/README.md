# Vault

TBD

## Glossary

If you want a better understanding of the following concepts, you can go to [bip32](https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki) [bip39](https://github.com/bitcoin/bips/blob/master/bip-0039.mediawiki) and [bip44](https://github.com/bitcoin/bips/blob/master/bip-0044.mediawiki) documentations.

1. Mnemonic
  A `mnemonic` is a group of easy to remember words that can be used to deterministically generate `wallets`.

2. Seed
  A `seed` is a binary key obtained from a `mnemonic`. It is obtained by using PBKDF2 function on the `mnemonic`. You can generate different `rootKey` from the same seed.

3. RootKey
  A Root Key (or Master Key) is a cryptographic key calculated from a `seed`, using an EC `algorithm`. Most common `algorithm` is "Secp256k1" (used by Bitcoin and Ethereum chains). Solana uses "Ed25519".
  A Root Key should not be used for on chain operation. It serves its purpose as a parent for children `privateKey`.

4. PrivateKey
  A PrivateKey is the private material used to do on chain action, such as signing transactions. It is deterministically generated by deriving a `rootKey` on a `path`. Vault also offers the capability to import a `privateKey`, if it was previously encrypted using an `encryptionKey`

5. EncryptionKey
  Encryption Key is an RSA key used by the vault in import operations. Any private material imported to the vault must be encrypted using the currently generated RSA Encryption Key public material.
  You can generate a new key by calling `POST /encryption-keys`. It will generate a new encryption key pair, register it as the current one, and return the public key for user to encrypt with. 

4. Account
  It is the abstraction around a `privateKey` used on chain. It is to be understood as defined in [bip32](https://github.com/bitcoin/bips/blob/master/bip-0032.mediawiki) specification. It can be the child of a `wallet` if it was generated in the vault using `POST /wallets/derive`, or it can be imported alone through `POST /accounts/import`.

5. Wallet
  It is a structure that organizes a collection of accounts. It wraps a `rootKey`, from which all `account` children's `privateKeys` are derived.


## Requirements

## Getting started

```bash
make vault/setup
```

## Running

```bash
make vault/start/dev
```

## Testing

```bash
# Run all tests
make vault/test

make vault/test/type
make vault/test/unit
make vault/test/integration
make vault/test/e2e
```

## Formatting

```bash
make vault/format
make vault/lint

make vault/format/check
make vault/lint/check
```

## CLI

```bash
make vault/cli CMD=help
```
